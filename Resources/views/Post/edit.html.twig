{% extends "ManhattanConsoleBundle:Console:template.html.twig" %}

{% block title %}Console: Posts | {{ entity.title }}{% endblock title %}
{% block template_title %}Console: Posts{% endblock template_title %}
{% block breadcrumbs %}<li><a href="{{ path('console_index') }}">Console</a></li><li><a href="{{ path('console_news') }}">Posts</a></li><li class="current"><a href="{{ path('console_news_edit', { 'id': entity.id }) }}">{{ entity.title }}</a></li>{% endblock breadcrumbs %}

{% block template_console %}

<div class="pure-g-r">
    <div class="pure-u-3-4">

        <div class="l-box">
            <h2>{{ entity.title }}</h2>
            <form action="{{ path('console_news_update', { 'id': entity.id }) }}" class ="pure-form pure-form-stacked" method="POST" {{ form_enctype(edit_form) }} novalidate>

                {{ form_widget(edit_form) }}

            <div class="form-actions">
                <a href="{{ path('console_news') }}" class="pure-button">Back to the list</a>
                <button type="submit" class="pure-button pure-button-primary">Save</button>
            </form>
                {% if is_granted('ROLE_SUPER_ADMIN') %}
                <form action="{{ path('console_news_delete', { 'id': entity.id }) }}" class="actions-delete" method="POST">
                    {{ form_row(delete_form.id) }}
                    {{ form_rest(delete_form) }}
                    <button type="submit" class="pure-button pure-button-error">Delete</button>
                </form>
                {% endif %}
            </div>
        </div>

    </div>

    <div class="pure-u-1-4">
        <div class="l-box">
            {% if include_documents %}
                <div class="control-group">
                    <h3>Documents   </h3>
                    <div class="controls">
                        <ul class="documents">
                        {% for document in entity.documents %}
                            <li class="{{ document.extension }}"><i class="icon-file"></i> {{ document.title }} - <small><a href="{{ asset(document.webPath) }}" target="_document">view</a></small></li>
                        {% endfor %}
                        </ul>
                    </div>
                    {%  if include_documents %}<a href="{{ path('console_news_documents', { 'id': entity.id }) }}" class="pure-button pure-button-secondary"><i class="fa fa-briefcase"></i> Manage Documents</a>{% endif %}
                </div>
            {% endif %}
        </div>
    </div>
</div>

{% endblock template_console %}

{% block foot_script %}
    {% javascripts
        'http://yui.yahooapis.com/3.13.0/build/yui/yui-min.js'
        '@ManhattanConsoleBundle/Resources/public/js/yui/mainmenu.js'
        'http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'
        '@OrnjMarkdownBundle/Resources/public/js/markdown.js'
        '@OrnjMarkdownBundle/Resources/public/js/to-markdown.js'
        '@OrnjMarkdownBundle/Resources/public/js/bootbox.js'
        '@OrnjMarkdownBundle/Resources/public/js/bootstrap-markdown.js'
        filter="?yui_js"
        output="js/console-edit.js"
    %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock foot_script %}
